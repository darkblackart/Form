<html>
<head>
    <title>Sandbox.js - Stryker report</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="highlightjs/styles/default.css">
    <link rel="stylesheet" href="stryker.css">
</head>

<body>  
    <img class="stryker-image" alt="Stryker" src="stryker-80x80.png">

    <div class="container-fluid">
        <h1>Sandbox.js - Stryker report</h1><div class="col-md-12">
    <h2>Summary</h2>
    <div class="row">
        <div class="col-xs-11">
            <table class="table table-hover table-bordered table-no-top">
                <thead>
                    <tr>
                        <th style="width: 20%"><div><span>File</span></div></th>
                        <th colspan="2"><div><span>Mutation score</span></div></th>
                        <th class="rotate text-center" style="width: 50px"><div><span># Killed</span></div></th>
                        <th class="rotate text-center" style="width: 50px"><div><span># Survived</span></div></th>
                        <th class="rotate text-center" style="width: 50px"><div><span># Timeout</span></div></th>
                        <th class="rotate text-center" style="width: 50px"><div><span># No coverage</span></div></th>
                        <th class="rotate text-center" style="width: 50px"><div><span># Errors</span></div></th>
                        <th class="rotate rotate-width-70 text-center" style="width: 70px"><div><span>Total detected</span></div></th>
                        <th class="rotate rotate-width-70 text-center" style="width: 70px"><div><span>Total undetected</span></div></th>
                        <th class="rotate rotate-width-70 text-center" style="width: 70px"><div><span>Total mutants</span></div></th>
                    </tr>
                </thead>                <tbody>
                    <tr>
                        <td><a href="Sandbox.js.html">Sandbox.js</a></td>
                        <td>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" aria-valuenow="83" aria-valuemin="0" aria-valuemax="100"
                                    style="width: 83%;">
                                    83%
                                </div>
                            </div>
                        </td>
                        <th class="text-center" style="width: 10%">26/31</th>
                        <td class="text-center">26</td>
                        <td class="text-center">5</td>
                        <td class="text-center">0</td>
                        <td class="text-center">0</td>
                        <td class="text-center">0</td>
                        <th class="text-center">26</th>
                        <th class="text-center">5</th>
                        <th class="text-center">31</th>
                    </tr>                </tbody>
            </table>
        </div>
    </div>
    <h2>Code</h2>
    <div class="row">
        <div class="col-sm-6">
           <a href="#" class="stryker-collapse-expand-all">Expand all</a>
        </div>
        <div class="col-sm-offset-2 col-sm-4">
            <label>
                <input class="stryker-display-killed" type="checkbox"> Also show killed mutants
            </label>
        </div>
    </div>
    <pre><code class="lang-javascript"><span class="bg-null">&quot;use strict&quot;;
var path &#x3D; require(&#x27;path&#x27;);
var log4js &#x3D; require(&#x27;log4js&#x27;);
var _ &#x3D; require(&#x27;lodash&#x27;);
var objectUtils_1 &#x3D; require(&#x27;./utils/objectUtils&#x27;);
var IsolatedTestRunnerAdapterFactory_1 &#x3D; require(&#x27;./isolated-runner/IsolatedTestRunnerAdapterFactory&#x27;);
var StrykerTempFolder_1 &#x3D; require(&#x27;./utils/StrykerTempFolder&#x27;);
var log &#x3D; log4js.getLogger(&#x27;Sandbox&#x27;);
var Sandbox &#x3D; (function () </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="0"><span class="label label-success">0</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="0">{
}</span><span class="stryker-original-code" data-mutant="0"><span class="bg-success">{
    function Sandbox(options, index, files, testFramework, coverageInstrumenter) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="1"><span class="label label-success">1</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="1">{
}</span><span class="stryker-original-code" data-mutant="1"><span class="bg-success">{
        this.options &#x3D; options;
        this.index &#x3D; index;
        this.files &#x3D; files;
        this.testFramework &#x3D; testFramework;
        this.coverageInstrumenter &#x3D; coverageInstrumenter;
        this.workingFolder &#x3D; StrykerTempFolder_1.default.createRandomFolder(&#x27;sandbox&#x27;);
        log.debug(&#x27;Creating a sandbox for files in %s&#x27;, this.workingFolder);
        this.testHooksFile &#x3D; path.join(this.workingFolder, &#x27;___testHooksForStryker.js&#x27;);
    }</span></span><span class="bg-success">
    Sandbox.prototype.initialize &#x3D; function () </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="2"><span class="label label-success">2</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="2">{
}</span><span class="stryker-original-code" data-mutant="2"><span class="bg-success">{
        var _this &#x3D; this;
        return this.fillSandbox()
            .then(function () </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="3"><span class="label label-success">3</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="3">{
}</span><span class="stryker-original-code" data-mutant="3"><span class="bg-success">{ return _this.initializeTestRunner(); }</span></span><span class="bg-success">);
    }</span></span><span class="bg-success">;
    Sandbox.prototype.run &#x3D; function (timeout) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="4"><span class="label label-success">4</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="4">{
}</span><span class="stryker-original-code" data-mutant="4"><span class="bg-success">{
        return this.testRunner.run({ timeout: timeout });
    }</span></span><span class="bg-success">;
    Sandbox.prototype.dispose &#x3D; function () </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="5"><span class="label label-danger">5</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="5">{
}</span><span class="stryker-original-code" data-mutant="5"><span class="bg-danger">{
        return this.testRunner.dispose();
    }</span></span><span class="bg-success">;
    Sandbox.prototype.runMutant &#x3D; function (mutant) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="6"><span class="label label-success">6</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="6">{
}</span><span class="stryker-original-code" data-mutant="6"><span class="bg-success">{
        var _this &#x3D; this;
        var targetedFile &#x3D; this.fileMap[mutant.filename];
        return Promise.all([mutant.save(targetedFile), this.filterTests(mutant)])
            .then(function () </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="7"><span class="label label-success">7</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="7">{
}</span><span class="stryker-original-code" data-mutant="7"><span class="bg-success">{ return _this.run(_this.calculateTimeout(mutant)); }</span></span><span class="bg-success">)
            .then(function (runResult) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="8"><span class="label label-success">8</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="8">{
}</span><span class="stryker-original-code" data-mutant="8"><span class="bg-success">{ return mutant.reset(targetedFile).then(function () </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="9"><span class="label label-danger">9</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="9">{
}</span><span class="stryker-original-code" data-mutant="9"><span class="bg-danger">{ return runResult; }</span></span><span class="bg-success">); }</span></span><span class="bg-success">);
    }</span></span><span class="bg-success">;
    Sandbox.prototype.fillSandbox &#x3D; function () </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="10"><span class="label label-success">10</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="10">{
}</span><span class="stryker-original-code" data-mutant="10"><span class="bg-success">{
        var _this &#x3D; this;
        this.fileMap &#x3D; Object.create(null);
        var copyPromises &#x3D; this.files
            .map(function (file) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="11"><span class="label label-success">11</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="11">{
}</span><span class="stryker-original-code" data-mutant="11"><span class="bg-success">{ return _this.copyFile(file); }</span></span><span class="bg-success">);
        if (</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="12"><span class="label label-success">12</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="12">true</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="13"><span class="label label-danger">13</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="13">false</span><span class="stryker-original-code" data-mutant="12"><span class="stryker-original-code" data-mutant="13"><span class="bg-danger">this.coverageInstrumenter</span></span></span><span class="bg-success">) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="14"><span class="label label-danger">14</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="14">{
}</span><span class="stryker-original-code" data-mutant="14"><span class="bg-danger">{
            copyPromises.push(StrykerTempFolder_1.default.writeFile(this.testHooksFile, this.coverageInstrumenter.hooksForTestRun()));
        }</span></span><span class="bg-success">
        else </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="15"><span class="label label-success">15</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="15">{
}</span><span class="stryker-original-code" data-mutant="15"><span class="bg-success">{
            copyPromises.push(StrykerTempFolder_1.default.writeFile(this.testHooksFile, &#x27;&#x27;));
        }</span></span><span class="bg-success">
        return Promise.all(copyPromises);
    }</span></span><span class="bg-success">;
    Sandbox.prototype.copyFile &#x3D; function (file) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="16"><span class="label label-success">16</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="16">{
}</span><span class="stryker-original-code" data-mutant="16"><span class="bg-success">{
        var cwd &#x3D; process.cwd();
        var relativePath &#x3D; file.path.substr(cwd.length);
        var folderName &#x3D; StrykerTempFolder_1.default.ensureFolderExists(</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="17"><span class="label label-success">17</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="17">this.workingFolder - path.dirname(relativePath)</span><span class="stryker-original-code" data-mutant="17"><span class="bg-success">this.workingFolder + path.dirname(relativePath)</span></span><span class="bg-success">);
        var targetFile &#x3D; path.join(folderName, path.basename(relativePath));
        this.fileMap[file.path] &#x3D; targetFile;
        var instrumentingStream &#x3D; </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="18"><span class="label label-success">18</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="18">false</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="19"><span class="label label-success">19</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="19">true</span><span class="stryker-original-code" data-mutant="18"><span class="stryker-original-code" data-mutant="19"><span class="bg-success">this.coverageInstrumenter</span></span></span><span class="bg-success"> ?
            this.coverageInstrumenter.instrumenterStreamForFile(file) : null;
        return StrykerTempFolder_1.default.copyFile(file.path, targetFile, instrumentingStream);
    }</span></span><span class="bg-success">;
    Sandbox.prototype.initializeTestRunner &#x3D; function () </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="20"><span class="label label-success">20</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="20">{
}</span><span class="stryker-original-code" data-mutant="20"><span class="bg-success">{
        var _this &#x3D; this;
        var files &#x3D; this.files.map(function (originalFile) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="21"><span class="label label-success">21</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="21">{
}</span><span class="stryker-original-code" data-mutant="21"><span class="bg-success">{ return _.assign(_.cloneDeep(originalFile), { path: _this.fileMap[originalFile.path] }); }</span></span><span class="bg-success">);
        files.unshift({ path: this.testHooksFile, mutated: false, included: true });
        var settings &#x3D; {
            files: files,
            strykerOptions: this.options,
            port: </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="22"><span class="label label-success">22</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="22">this.options.port - this.index</span><span class="stryker-original-code" data-mutant="22"><span class="bg-success">this.options.port + this.index</span></span><span class="bg-success">
        };
        log.debug(&quot;Creating test runner %s using settings {port: %s}&quot;, this.index, settings.port);
        this.testRunner &#x3D; IsolatedTestRunnerAdapterFactory_1.default.create(settings);
        return this.testRunner.init();
    }</span></span><span class="bg-success">;
    Sandbox.prototype.calculateTimeout &#x3D; function (mutant) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="23"><span class="label label-success">23</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="23">{
}</span><span class="stryker-original-code" data-mutant="23"><span class="bg-success">{
        var baseTimeout &#x3D; mutant.timeSpentScopedTests;
        return </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="24"><span class="label label-success">24</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="24">this.options.timeoutFactor * baseTimeout - this.options.timeoutMs</span><span class="stryker-original-code" data-mutant="24"><span class="bg-success">(</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="25"><span class="label label-success">25</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="25">this.options.timeoutFactor / baseTimeout</span><span class="stryker-original-code" data-mutant="25"><span class="bg-success">this.options.timeoutFactor * baseTimeout</span></span><span class="bg-success">) + this.options.timeoutMs</span></span><span class="bg-success">;
    }</span></span><span class="bg-success">;
    Sandbox.prototype.filterTests &#x3D; function (mutant) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="26"><span class="label label-success">26</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="26">{
}</span><span class="stryker-original-code" data-mutant="26"><span class="bg-success">{
        if (</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="27"><span class="label label-success">27</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="27">false</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="28"><span class="label label-success">28</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="28">true</span><span class="stryker-original-code" data-mutant="27"><span class="stryker-original-code" data-mutant="28"><span class="bg-success">this.testFramework</span></span></span><span class="bg-success">) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="29"><span class="label label-success">29</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="29">{
}</span><span class="stryker-original-code" data-mutant="29"><span class="bg-success">{
            var fileContent &#x3D; objectUtils_1.wrapInClosure(this.testFramework.filter(mutant.scopedTestIds));
            return StrykerTempFolder_1.default.writeFile(this.testHooksFile, fileContent);
        }</span></span><span class="bg-success">
        else </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="30"><span class="label label-danger">30</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="30">{
}</span><span class="stryker-original-code" data-mutant="30"><span class="bg-danger">{
            return Promise.resolve(void 0);
        }</span></span><span class="bg-success">
    }</span></span><span class="bg-success">;
    return Sandbox;
}</span></span><span class="bg-null">());
Object.defineProperty(exports, &quot;__esModule&quot;, { value: true });
exports.default &#x3D; Sandbox;
//# sourceMappingURL&#x3D;Sandbox.js.ma</span>p</code></pre>
</div><footer>
    Generated with stryker-html-reporter generator. Visit the <a href="http://stryker-mutator.github.io" target="_blank">Stryker website</a></footer>
</div>
<script src="stryker.js" defer></script>
</body>
</html>