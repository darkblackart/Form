<html>
<head>
    <title>CoverageInstrumenterStream.js - Stryker report</title>
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../bootstrap/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../highlightjs/styles/default.css">
    <link rel="stylesheet" href="../stryker.css">
</head>

<body>  
    <img class="stryker-image" alt="Stryker" src="../stryker-80x80.png">

    <div class="container-fluid">
        <h1>CoverageInstrumenterStream.js - Stryker report</h1><div class="col-md-12">
    <h2>Summary</h2>
    <div class="row">
        <div class="col-xs-11">
            <table class="table table-hover table-bordered table-no-top">
                <thead>
                    <tr>
                        <th style="width: 20%"><div><span>File</span></div></th>
                        <th colspan="2"><div><span>Mutation score</span></div></th>
                        <th class="rotate text-center" style="width: 50px"><div><span># Killed</span></div></th>
                        <th class="rotate text-center" style="width: 50px"><div><span># Survived</span></div></th>
                        <th class="rotate text-center" style="width: 50px"><div><span># Timeout</span></div></th>
                        <th class="rotate text-center" style="width: 50px"><div><span># No coverage</span></div></th>
                        <th class="rotate text-center" style="width: 50px"><div><span># Errors</span></div></th>
                        <th class="rotate rotate-width-70 text-center" style="width: 70px"><div><span>Total detected</span></div></th>
                        <th class="rotate rotate-width-70 text-center" style="width: 70px"><div><span>Total undetected</span></div></th>
                        <th class="rotate rotate-width-70 text-center" style="width: 70px"><div><span>Total mutants</span></div></th>
                    </tr>
                </thead>                <tbody>
                    <tr>
                        <td><a href="CoverageInstrumenterStream.js.html">CoverageInstrumenterStream.js</a></td>
                        <td>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"
                                    style="width: 65%;">
                                    65%
                                </div>
                            </div>
                        </td>
                        <th class="text-center" style="width: 10%">15/23</th>
                        <td class="text-center">15</td>
                        <td class="text-center">8</td>
                        <td class="text-center">0</td>
                        <td class="text-center">0</td>
                        <td class="text-center">0</td>
                        <th class="text-center">15</th>
                        <th class="text-center">8</th>
                        <th class="text-center">23</th>
                    </tr>                </tbody>
            </table>
        </div>
    </div>
    <h2>Code</h2>
    <div class="row">
        <div class="col-sm-6">
           <a href="#" class="stryker-collapse-expand-all">Expand all</a>
        </div>
        <div class="col-sm-offset-2 col-sm-4">
            <label>
                <input class="stryker-display-killed" type="checkbox"> Also show killed mutants
            </label>
        </div>
    </div>
    <pre><code class="lang-javascript"><span class="bg-null">&quot;use strict&quot;;
var __extends &#x3D; </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="0"><span class="label label-success">0</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="0">this &amp;&amp; this.__extends &amp;&amp; function (d, b) {
    for (var p in b)
        if (b.hasOwnProperty(p))
            d[p] &#x3D; b[p];
    function __() {
        this.constructor &#x3D; d;
    }
    d.prototype &#x3D; b &#x3D;&#x3D;&#x3D; null ? Object.create(b) : (__.prototype &#x3D; b.prototype, new __());
}</span><span class="stryker-original-code" data-mutant="0"><span class="bg-success">(</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="1"><span class="label label-success">1</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="1">this || this.__extends</span><span class="stryker-original-code" data-mutant="1"><span class="bg-success">this &amp;&amp; this.__extends</span></span><span class="bg-success">) || function (d, b) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="2"><span class="label label-success">2</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="2">{
}</span><span class="stryker-original-code" data-mutant="2"><span class="bg-success">{
    for (var p in b) if (</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="3"><span class="label label-danger">3</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="3">false</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="4"><span class="label label-danger">4</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="4">true</span><span class="stryker-original-code" data-mutant="3"><span class="stryker-original-code" data-mutant="4"><span class="bg-danger">b.hasOwnProperty(p)</span></span></span><span class="bg-success">) d[p] &#x3D; b[p];
    function __() </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="5"><span class="label label-danger">5</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="5">{
}</span><span class="stryker-original-code" data-mutant="5"><span class="bg-danger">{ this.constructor &#x3D; d; }</span></span><span class="bg-success">
    d.prototype &#x3D; </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="6"><span class="label label-success">6</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="6">true</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="7"><span class="label label-success">7</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="7">b !&#x3D;&#x3D; null</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="8"><span class="label label-danger">8</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="8">false</span><span class="stryker-original-code" data-mutant="6"><span class="stryker-original-code" data-mutant="7"><span class="stryker-original-code" data-mutant="8"><span class="bg-danger">b &#x3D;&#x3D;&#x3D; null</span></span></span></span><span class="bg-success"> ? Object.create(b) : (__.prototype &#x3D; b.prototype, new __());
}</span></span></span><span class="bg-null">;
var stream_1 &#x3D; require(&#x27;stream&#x27;);
var istanbul_1 &#x3D; require(&#x27;istanbul&#x27;);
var log4js &#x3D; require(&#x27;log4js&#x27;);
require(&#x27;stryker-api/estree&#x27;);
var coverageObjRegex &#x3D; /\{.*&quot;path&quot;.*&quot;fnMap&quot;.*&quot;statementMap&quot;.*&quot;branchMap&quot;.*\}/g;
var log &#x3D; log4js.getLogger(&#x27;CoverageInstrumenterStream&#x27;);
/**
 * Represents a stream responsible to add code coverage instrumentation and reporting back on the statement map
 */
var CoverageInstrumenterStream &#x3D; (function (_super) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="9"><span class="label label-success">9</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="9">{
}</span><span class="stryker-original-code" data-mutant="9"><span class="bg-success">{
    __extends(CoverageInstrumenterStream, _super);
    function CoverageInstrumenterStream(coverageVariable, filename, opts) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="10"><span class="label label-success">10</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="10">{
}</span><span class="stryker-original-code" data-mutant="10"><span class="bg-success">{
        _super.call(this, opts);
        this.coverageVariable &#x3D; coverageVariable;
        this.filename &#x3D; filename;
        this.opts &#x3D; opts;
        this.source &#x3D; &#x27;&#x27;;
    }</span></span><span class="bg-success">
    CoverageInstrumenterStream.prototype._transform &#x3D; function (chunk, encoding, callback) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="11"><span class="label label-success">11</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="11">{
}</span><span class="stryker-original-code" data-mutant="11"><span class="bg-success">{
        if (</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="12"><span class="label label-danger">12</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="12">false</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="13"><span class="label label-danger">13</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="13">typeof chunk !&#x3D;&#x3D; &#x27;string&#x27;</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="14"><span class="label label-danger">14</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="14">true</span><span class="stryker-original-code" data-mutant="12"><span class="stryker-original-code" data-mutant="13"><span class="stryker-original-code" data-mutant="14"><span class="bg-danger">typeof chunk &#x3D;&#x3D;&#x3D; &#x27;string&#x27;</span></span></span></span><span class="bg-success">) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="danger" data-mutant="15"><span class="label label-danger">15</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="15">{
}</span><span class="stryker-original-code" data-mutant="15"><span class="bg-danger">{
            this.source +&#x3D; chunk;
        }</span></span><span class="bg-success">
        else </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="16"><span class="label label-success">16</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="16">{
}</span><span class="stryker-original-code" data-mutant="16"><span class="bg-success">{
            this.source +&#x3D; chunk.toString();
        }</span></span><span class="bg-success">
        callback();
    }</span></span><span class="bg-success">;
    CoverageInstrumenterStream.prototype._flush &#x3D; function (callback) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="17"><span class="label label-success">17</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="17">{
}</span><span class="stryker-original-code" data-mutant="17"><span class="bg-success">{
        try </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="18"><span class="label label-success">18</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="18">{
}</span><span class="stryker-original-code" data-mutant="18"><span class="bg-success">{
            var instrumenter &#x3D; new istanbul_1.Instrumenter({ coverageVariable: this.coverageVariable });
            var instrumentedCode &#x3D; instrumenter.instrumentSync(this.source, this.filename);
            coverageObjRegex.lastIndex &#x3D; 0;
            var coverageObjectMatch &#x3D; coverageObjRegex.exec(instrumentedCode).toString();
            var coverageObj &#x3D; JSON.parse(coverageObjectMatch);
            this.statementMap &#x3D; coverageObj.statementMap;
            this.push(instrumentedCode);
        }</span></span><span class="bg-success">
        catch (err) </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="19"><span class="label label-success">19</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="19">{
}</span><span class="stryker-original-code" data-mutant="19"><span class="bg-success">{
            var error &#x3D; </span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="20"><span class="label label-success">20</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="20">&#x27;Error while instrumenting file &quot;&#x27; + this.filename + &#x27;&quot;, error was: &#x27; - err.toString()</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="21"><span class="label label-success">21</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="21">&#x27;Error while instrumenting file &quot;&#x27; + this.filename - &#x27;&quot;, error was: &#x27;</span><a href="#" class="stryker-mutant-button" data-mutant-status-annotation="success" data-mutant="22"><span class="label label-success">22</span></a><span class="label label-info stryker-mutant-replacement" hidden data-mutant="22">&#x27;Error while instrumenting file &quot;&#x27; - this.filename</span><span class="stryker-original-code" data-mutant="20"><span class="stryker-original-code" data-mutant="21"><span class="stryker-original-code" data-mutant="22"><span class="bg-success">&quot;Error while instrumenting file \&quot;&quot; + this.filename</span></span><span class="bg-success"> + &quot;\&quot;, error was: &quot;</span></span><span class="bg-success"> + err.toString()</span></span><span class="bg-success">;
            log.error(error);
            this.push(this.source);
        }</span></span><span class="bg-success">
        callback();
    }</span></span><span class="bg-success">;
    return CoverageInstrumenterStream;
}</span></span><span class="bg-null">(stream_1.Transform));
Object.defineProperty(exports, &quot;__esModule&quot;, { value: true });
exports.default &#x3D; CoverageInstrumenterStream;
//# sourceMappingURL&#x3D;CoverageInstrumenterStream.js.ma</span>p</code></pre>
</div><footer>
    Generated with stryker-html-reporter generator. Visit the <a href="http://stryker-mutator.github.io" target="_blank">Stryker website</a></footer>
</div>
<script src="../stryker.js" defer></script>
</body>
</html>